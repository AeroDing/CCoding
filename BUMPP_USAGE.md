# CCoding æ’ä»¶å‘å¸ƒæŒ‡å— - ä½¿ç”¨ bumpp

æœ¬é¡¹ç›®å·²é›†æˆ `bumpp` è‡ªåŠ¨åŒ–ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œå¯ä»¥ä¸€é”®å®Œæˆç‰ˆæœ¬æ›´æ–°ã€æ„å»ºã€æäº¤ã€æ ‡ç­¾åˆ›å»ºå’Œæ¨é€ç­‰æ“ä½œã€‚

## ğŸš€ å¿«é€Ÿå‘å¸ƒ

### ä½¿ç”¨ bumpp ç›´æ¥å‘å¸ƒ

```bash
# å‘å¸ƒä¿®å¤ç‰ˆæœ¬ (0.1.1 -> 0.1.2)
npx bumpp patch

# å‘å¸ƒå°ç‰ˆæœ¬ (0.1.1 -> 0.2.0)
npx bumpp minor

# å‘å¸ƒå¤§ç‰ˆæœ¬ (0.1.1 -> 1.0.0)
npx bumpp major

# äº¤äº’å¼é€‰æ‹©ç‰ˆæœ¬ç±»å‹
npx bumpp
```

### ä½¿ç”¨å‘å¸ƒè„šæœ¬

```bash
# ä½¿ç”¨è„šæœ¬å‘å¸ƒï¼ˆåŒ…å«é¢å¤–æ£€æŸ¥å’Œæç¤ºï¼‰
./scripts/release.sh patch
./scripts/release.sh minor
./scripts/release.sh major

# äº¤äº’å¼å‘å¸ƒ
./scripts/release.sh
```

## ğŸ“‹ å‘å¸ƒæµç¨‹

å½“æ‚¨æ‰§è¡Œ `npx bumpp patch` æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. **é¢„å¤„ç†** (`prebumpp` è„šæœ¬)ï¼š
   - ç¼–è¯‘ TypeScript ä»£ç 
   - æ„å»ºé¡¹ç›®

2. **ç‰ˆæœ¬æ›´æ–°**ï¼š
   - æ›´æ–° `package.json` å’Œ `package-lock.json` ä¸­çš„ç‰ˆæœ¬å·
   - åˆ›å»º git commit (æ ¼å¼: `chore: release v0.1.2`)
   - åˆ›å»º git tag (æ ¼å¼: `v0.1.2`)
   - æ¨é€åˆ°è¿œç¨‹ä»“åº“

3. **åå¤„ç†** (`postbumpp` è„šæœ¬)ï¼š
   - ç”Ÿæˆ VSCode æ’ä»¶åŒ… (`CCoding-0.1.2.vsix`)
   - æ˜¾ç¤ºæˆåŠŸæç¤ºä¿¡æ¯

4. **è‡ªåŠ¨åŒ–æ„å»º**ï¼š
   - GitHub Actions æ£€æµ‹åˆ°æ–°æ ‡ç­¾
   - è‡ªåŠ¨æ„å»ºå¹¶åˆ›å»º Release
   - ä¸Šä¼  `.vsix` æ–‡ä»¶å’Œæ ¡éªŒå’Œ

## ğŸ› ï¸ é…ç½®è¯´æ˜

### bumpp.config.ts

```typescript
import { defineConfig } from 'bumpp'

export default defineConfig({
  // æŒ‡å®šè¦æ›´æ–°ç‰ˆæœ¬å·çš„æ–‡ä»¶
  files: [
    'package.json',
    'package-lock.json'
  ]
})
```

### package.json è„šæœ¬

```json
{
  "scripts": {
    "prebumpp": "npm run build",
    "postbumpp": "npx vsce package --out CCoding-$(node -p \"require('./package.json').version\").vsix && echo 'ğŸ‰ ç‰ˆæœ¬å‘å¸ƒå®Œæˆï¼'"
  }
}
```

## ğŸ“¦ ç‰ˆæœ¬ç±»å‹è¯´æ˜

- **patch**: ä¿®å¤ç‰ˆæœ¬ï¼Œç”¨äº bug ä¿®å¤ (0.1.1 â†’ 0.1.2)
- **minor**: å°ç‰ˆæœ¬ï¼Œç”¨äºæ–°åŠŸèƒ½æ·»åŠ  (0.1.1 â†’ 0.2.0)
- **major**: å¤§ç‰ˆæœ¬ï¼Œç”¨äºç ´åæ€§æ›´æ”¹ (0.1.1 â†’ 1.0.0)
- **prerelease**: é¢„å‘å¸ƒç‰ˆæœ¬ (0.1.1 â†’ 0.1.2-0)

## ğŸ” æµ‹è¯•å‘å¸ƒ

åœ¨æ­£å¼å‘å¸ƒå‰ï¼Œå¯ä»¥ä½¿ç”¨ dry-run æ¨¡å¼æµ‹è¯•ï¼š

```bash
# æµ‹è¯• patch ç‰ˆæœ¬å‘å¸ƒï¼ˆä¸å®é™…æ‰§è¡Œï¼‰
npx bumpp --dry-run patch

# æµ‹è¯•æ„å»ºè¿‡ç¨‹
./scripts/test-build.sh
```

## ğŸ“ æœ€ä½³å®è·µ

1. **å‘å¸ƒå‰æ£€æŸ¥**ï¼š
   - ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
   - æ›´æ–° `CHANGELOG.md`
   - ç¡®è®¤æ²¡æœ‰æœªæäº¤çš„æ›´æ”¹

2. **ç‰ˆæœ¬é€‰æ‹©**ï¼š
   - ä¼˜å…ˆä½¿ç”¨ `patch` ç‰ˆæœ¬è¿›è¡Œ bug ä¿®å¤
   - æ–°åŠŸèƒ½ä½¿ç”¨ `minor` ç‰ˆæœ¬
   - ç ´åæ€§æ›´æ”¹ä½¿ç”¨ `major` ç‰ˆæœ¬

3. **å‘å¸ƒéªŒè¯**ï¼š
   - æ£€æŸ¥ GitHub Release æ˜¯å¦æ­£ç¡®åˆ›å»º
   - éªŒè¯ `.vsix` æ–‡ä»¶æ˜¯å¦æ­£ç¡®ä¸Šä¼ 
   - æµ‹è¯•æ’ä»¶å®‰è£…å’ŒåŠŸèƒ½

## ğŸš¨ æ³¨æ„äº‹é¡¹

- bumpp ä¼šè‡ªåŠ¨å¤„ç† git æ“ä½œï¼Œæ— éœ€æ‰‹åŠ¨æäº¤å’Œæ¨é€
- ç¡®ä¿æœ‰æ¨é€åˆ°è¿œç¨‹ä»“åº“çš„æƒé™
- å‘å¸ƒå GitHub Actions éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´å®Œæˆæ„å»º
- æœ¬åœ°ç”Ÿæˆçš„ `.vsix` æ–‡ä»¶ä»…ä¾›æµ‹è¯•ï¼Œæ­£å¼ç‰ˆæœ¬è¯·ä» GitHub Release ä¸‹è½½ 
